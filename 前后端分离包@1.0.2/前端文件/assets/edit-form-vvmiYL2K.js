var N=Object.defineProperty;var v=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var b=(r,e,t)=>e in r?N(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,E=(r,e)=>{for(var t in e||(e={}))q.call(e,t)&&b(r,t,e[t]);if(v)for(var t of v(e))H.call(e,t)&&b(r,t,e[t]);return r};import{_ as M,O as j,P as G,r as p,m as w,u as A,i as J,o as K,c as L,w as n,e as T,d as o,b as i,q as V,g as Q,f as S,E as W,h as X}from"./index-DKVio5DX.js";import{E as Y,a as Z}from"./col-Ru1YGmP5.js";import{i as $}from"./index-1zv9CzUI.js";import{B as ee}from"./index-bSvVF2vt.js";import{z as te,a as ae}from"./zh_Hans-LNKypXxg.js";import{g as oe,h as le}from"./github-markdown-light--sWw-Hw4.js";import{u as se}from"./index-94H0BTDC.js";import{u as ne,a as re}from"./index-Zq_S2QqK.js";const ie={__name:"edit-form",props:{data:Object},setup(r){const e=r,{currentRoute:t,push:k}=j(),{removePageTab:x,reloadPageTab:y}=G();p(null);const I=w({locale:te,plugins:[oe({locale:ae}),le()],editorConfig:{lineNumbers:!0},uploadImages:l=>Promise.all(l.map(s=>new Promise((u,d)=>{se(s).then(a=>{console.log("res:",a);const c={url:a.url,alt:a.name,title:a.name};u(c)}).catch(a=>{d(a)})})))}),_=p(!1),f=p(!1),g=p(null),{form:m,resetFields:F,assignFields:P}=A({noticeId:void 0,noticeTitle:"",noticeInfo:""}),C=w({noticeTitle:[{required:!0,message:"请输入公告标题",type:"string",trigger:"blur"}]}),B=()=>{var l,s;(s=(l=g.value)==null?void 0:l.validate)==null||s.call(l,u=>{if(!u)return;f.value=!0,(_.value?ne:re)(m).then(a=>{f.value=!1,V.success(a),U()}).catch(a=>{f.value=!1,V.error(a.message)})})},R=()=>{x({key:i(t).path}),k("/agent/notice")},U=()=>{x({key:i(t).path}),y({fullPath:"/agent/notice"})};return J(()=>e.data,()=>{var l,s;e.data?(P(E({},e.data)),_.value=!0):(_.value=!1,F(),(s=(l=g.value)==null?void 0:l.clearValidate)==null||s.call(l))},{immediate:!0}),(l,s)=>{const u=Q,d=S,a=$,c=Y,D=W,O=Z,z=X;return K(),L(z,{ref_key:"formRef",ref:g,model:i(m),rules:C,"label-width":"80px"},{default:n(()=>[o(O,{gutter:10},{default:n(()=>[o(c,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[o(a,null,{default:n(()=>[o(d,{style:{"margin-left":"-90px","margin-top":"-10px","margin-block":"-10px"}},{default:n(()=>[o(u,{type:"primary",loading:f.value,onClick:B},{default:n(()=>[T(" 保存 ")]),_:1},8,["loading"]),o(u,{onClick:R},{default:n(()=>[T("关闭")]),_:1})]),_:1})]),_:1})]),_:1}),o(c,{xs:24,sm:24,md:24,lg:24,xl:24},{default:n(()=>[o(a,null,{default:n(()=>[o(c,{lg:24,md:24,sm:24,xs:24},{default:n(()=>[o(d,{label:"公告标题",prop:"noticeTitle"},{default:n(()=>[o(D,{clearable:"",maxlength:100,modelValue:i(m).noticeTitle,"onUpdate:modelValue":s[0]||(s[0]=h=>i(m).noticeTitle=h),"show-word-limit":"",placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),o(c,{lg:24,md:24,sm:24,xs:24},{default:n(()=>[o(ee,{modelValue:i(m).noticeInfo,"onUpdate:modelValue":s[1]||(s[1]=h=>i(m).noticeInfo=h),config:I,height:"600px"},null,8,["modelValue","config"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}},xe=M(ie,[["__scopeId","data-v-14d36315"]]);export{xe as E};
