var De=Object.defineProperty,qe=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ke=(e,l,i)=>l in e?De(e,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[l]=i,w=(e,l)=>{for(var i in l||(l={}))Se.call(l,i)&&ke(e,i,l[i]);if(X)for(var i of X(l))Te.call(l,i)&&ke(e,i,l[i]);return e},P=(e,l)=>qe(e,We(l));var Ee=(e,l)=>{var i={};for(var s in e)Se.call(e,s)&&l.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&X)for(var s of X(e))l.indexOf(s)<0&&Te.call(e,s)&&(i[s]=e[s]);return i};var q=(e,l,i)=>new Promise((s,c)=>{var d=n=>{try{t(i.next(n))}catch(y){c(y)}},f=n=>{try{t(i.throw(n))}catch(y){c(y)}},t=n=>n.done?s(n.value):Promise.resolve(n.value).then(d,f);t((i=i.apply(e,l)).next())});import{aB as Ge,dp as ae,bE as we,a8 as me,d3 as ee,v as z,S as oe,a9 as Y,a7 as $e,bk as Je,i as Z,bd as Qe,c1 as Ye,ba as Ze,dq as Xe,r as $,m as te,bs as et,bn as ce,aC as tt,K as Ne,Z as se,o as V,p as M,j as H,F as fe,G as ye,ag as he,a6 as x,af as J,d as a,ad as Oe,n as F,cz as lt,c as N,aF as Ie,w as o,t as Q,cc as nt,cd as at,_ as Be,u as je,a as ot,b as p,e as E,E as Me,f as Ke,g as ge,h as Pe,s as re,dr as ze,q as D,ae as Ae,ds as ve,A as Ve,H as pe,dt as ie,du as st,Y as it,D as Ue,$ as rt,l as dt,x as ut,z as ct,k as pt,C as mt}from"./index-DKVio5DX.js";import{i as Fe}from"./index-1zv9CzUI.js";import{E as ft,i as yt}from"./index-JCBdu9eJ.js";import"./index-hd5M_H5A.js";import{E as He,a as Le}from"./col-Ru1YGmP5.js";import{E as ht}from"./input-number-THtMQKxf.js";import{_ as be}from"./tree-Vw--s94M.js";import{i as vt,v as bt}from"./index-oGUME3om.js";import{i as _t}from"./index-C8m5DZvo.js";import"./index-8oT0IIFa.js";const gt=(e,{attrs:l,emit:i},{tree:s,key:c})=>{const d=Ge("tree-select"),f=P(w(w({},ae(we(e),Object.keys(me.props))),l),{"onUpdate:modelValue":t=>i(ee,t),valueKey:c,popperClass:z(()=>{const t=[d.e("popper")];return e.popperClass&&t.push(e.popperClass),t.join(" ")}),filterMethod:(t="")=>{e.filterMethod&&e.filterMethod(t),oe(()=>{var n;(n=s.value)==null||n.filter(t)})},onVisibleChange:t=>{var n;(n=l.onVisibleChange)==null||n.call(l,t),e.filterable&&t&&f.filterMethod()}});return f},Vt=Y({extends:$e,setup(e,l){const i=$e.setup(e,l);delete i.selectOptionClick;const s=Je().proxy;return oe(()=>{i.select.cachedOptions.get(s.value)||i.select.onOptionCreate(s)}),i},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function _e(e){return e||e===0}function Ce(e){return Array.isArray(e)&&e.length}function G(e){return Array.isArray(e)?e:_e(e)?[e]:[]}function le(e,l,i,s,c){for(let d=0;d<e.length;d++){const f=e[d];if(l(f,d,e,c))return s?s(f,d,e,c):f;{const t=i(f);if(Ce(t)){const n=le(t,l,i,s,f);if(n)return n}}}}function Re(e,l,i,s){for(let c=0;c<e.length;c++){const d=e[c];l(d,c,e,s);const f=i(d);Ce(f)&&Re(f,l,i,d)}}const Ct=(e,{attrs:l,slots:i,emit:s},{select:c,tree:d,key:f})=>{Z(()=>e.modelValue,()=>{e.showCheckbox&&oe(()=>{const h=d.value;h&&!Qe(h.getCheckedKeys(),G(e.modelValue))&&h.setCheckedKeys(G(e.modelValue))})},{immediate:!0,deep:!0});const t=z(()=>w({value:f.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf"},e.props)),n=(h,r)=>{var m;const b=t.value[h];return Ye(b)?b(r,(m=d.value)==null?void 0:m.getNode(n("value",r))):r[b]},y=G(e.modelValue).map(h=>le(e.data||[],r=>n("value",r)===h,r=>n("children",r),(r,m,b,S)=>S&&n("value",S))).filter(h=>_e(h)),C=z(()=>{if(!e.renderAfterExpand&&!e.lazy)return[];const h=[];return Re(e.data.concat(e.cacheData),r=>{const m=n("value",r);h.push({value:m,currentLabel:n("label",r),isDisabled:n("disabled",r)})},r=>n("children",r)),h}),B=z(()=>C.value.reduce((h,r)=>P(w({},h),{[r.value]:r}),{}));return P(w(w({},ae(we(e),Object.keys(be.props))),l),{nodeKey:f,expandOnClickNode:z(()=>!e.checkStrictly&&e.expandOnClickNode),defaultExpandedKeys:z(()=>e.defaultExpandedKeys?e.defaultExpandedKeys.concat(y):y),renderContent:(h,{node:r,data:m,store:b})=>h(Vt,{value:n("value",m),label:n("label",m),disabled:n("disabled",m)},e.renderContent?()=>e.renderContent(h,{node:r,data:m,store:b}):i.default?()=>i.default({node:r,data:m,store:b}):void 0),filterNodeMethod:(h,r,m)=>{var b;return e.filterNodeMethod?e.filterNodeMethod(h,r,m):h?(b=n("label",r))==null?void 0:b.includes(h):!0},onNodeClick:(h,r,m)=>{var b,S,_;if((b=l.onNodeClick)==null||b.call(l,h,r,m),!(e.showCheckbox&&e.checkOnClickNode))if(!e.showCheckbox&&(e.checkStrictly||r.isLeaf)){if(!n("disabled",h)){const u=(S=c.value)==null?void 0:S.options.get(n("value",h));(_=c.value)==null||_.handleOptionSelect(u)}}else e.expandOnClickNode&&m.proxy.handleExpandIconClick()},onCheck:(h,r)=>{if(!e.showCheckbox)return;const m=n("value",h),b=r.checkedKeys,S=e.multiple?G(e.modelValue).filter(u=>u in B.value&&!d.value.getNode(u)&&!b.includes(u)):[],_=b.concat(S);if(e.checkStrictly)s(ee,e.multiple?_:_.includes(m)?m:void 0);else if(e.multiple)s(ee,d.value.getCheckedKeys(!0));else{const u=le([h],k=>!Ce(n("children",k))&&!n("disabled",k),k=>n("children",k)),g=u?n("value",u):void 0,I=_e(e.modelValue)&&!!le([h],k=>n("value",k)===e.modelValue,k=>n("children",k));s(ee,g===e.modelValue||I?void 0:g)}oe(()=>{var u;const g=G(e.modelValue);d.value.setCheckedKeys(g),(u=l.onCheck)==null||u.call(l,h,{checkedKeys:d.value.getCheckedKeys(),checkedNodes:d.value.getCheckedNodes(),halfCheckedKeys:d.value.getHalfCheckedKeys(),halfCheckedNodes:d.value.getHalfCheckedNodes()})})},cacheOptions:C})};var kt=Y({props:{data:{type:Array,default:()=>[]}},setup(e){const l=Ze(Xe);return Z(()=>e.data,()=>{var i;e.data.forEach(c=>{l.cachedOptions.has(c.value)||l.cachedOptions.set(c.value,c)});const s=((i=l.selectWrapper)==null?void 0:i.querySelectorAll("input"))||[];Array.from(s).includes(document.activeElement)||l.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const St=Y({name:"ElTreeSelect",inheritAttrs:!1,props:P(w(w({},me.props),be.props),{cacheData:{type:Array,default:()=>[]}}),setup(e,l){const{slots:i,expose:s}=l,c=$(),d=$(),f=z(()=>e.nodeKey||e.valueKey||"value"),t=gt(e,l,{select:c,tree:d,key:f}),B=Ct(e,l,{select:c,tree:d,key:f}),{cacheOptions:n}=B,y=Ee(B,["cacheOptions"]),C=te({});return s(C),et(()=>{Object.assign(C,w(w({},ae(d.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"])),ae(c.value,["focus","blur"])))}),()=>ce(me,te(P(w({},t),{ref:h=>c.value=h})),P(w({},i),{default:()=>[ce(kt,{data:n.value}),ce(be,te(P(w({},y),{ref:h=>d.value=h})))]}))}});var ne=tt(St,[["__file","tree-select.vue"]]);ne.install=e=>{e.component(ne.name,ne)};const Tt=ne,Et=Tt,$t=Y({name:"IconGrid",components:{ElEmpty:ft,EleTooltip:Ne},props:{icon:String,data:{type:Array,required:!0},emptyProps:Object,tooltip:Boolean,tooltipProps:Object,popperVisible:Boolean,gridStyle:Object,itemStyle:Object},emits:{select:e=>!0},setup(e,{emit:l}){const i=$(!1),s=$(""),c=$(),d=y=>{i.value=y},f=()=>{d(!1)},t=(y,C)=>{e.tooltip&&e.popperVisible&&y&&(c.value=C.currentTarget,s.value=y,i.value=!0)},n=y=>{l("select",y)};return Z(()=>e.popperVisible,y=>{y||f()}),{tooltipVisible:i,tooltipContent:s,virtualRef:c,updateTooltipVisible:d,hideTooltip:f,onItemHover:t,onItemClick:n}}}),Ot=(e,l)=>{const i=e.__vccOpts||e;for(const[s,c]of l)i[s]=c;return i},It={class:"ele-icon-select-body"},wt=["title","onClick","onMouseover"],Nt={key:0,class:"ele-icon-select-empty"};function Bt(e,l,i,s,c,d){const f=se("ElEmpty"),t=se("EleTooltip");return V(),M("div",It,[H("div",{class:"ele-icon-select-grid",style:x(e.gridStyle)},[(V(!0),M(fe,null,ye(e.data,(n,y)=>(V(),M("div",{key:y+"-"+n,class:he(["ele-icon-select-item",{"is-active":e.icon&&n===e.icon}]),title:e.tooltip?void 0:n,style:x(e.itemStyle),onClick:C=>e.onItemClick(n),onMouseover:C=>e.onItemHover(n,C)},[J(e.$slots,"icon",{icon:n})],46,wt))),128))],4),!e.data||!e.data.length?(V(),M("div",Nt,[a(f,Oe({imageSize:60},e.emptyProps),null,16)])):F("",!0),a(t,Oe({placement:"top",offset:6,teleported:!1},e.tooltipProps||{},{visible:e.tooltipVisible,content:e.tooltipContent,virtualRef:e.virtualRef,virtualTriggering:!0,"onUpdate:visible":e.updateTooltipVisible}),null,16,["visible","content","virtualRef","onUpdate:visible"])])}const jt=Ot($t,[["render",Bt]]),Mt={modelValue:String,data:{type:Array,required:!0},disabled:Boolean,size:String,clearable:Boolean,placeholder:String,automaticDropdown:Boolean,filterable:Boolean,teleported:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},placement:{type:String,default:"bottom-start"},transition:{type:String,default:"el-zoom-in-top"},popperOptions:Object,popperClass:String,popperWidth:{type:[Number,String],default:414},popperHeight:{type:[Number,String],default:260},selectStyle:Object,inputStyle:Object,hideOnSingleTab:Boolean,emptyProps:Object,tooltip:{type:Boolean,default:!0},tooltipProps:Object,headerStyle:Object,tabsStyle:Object,searchStyle:Object,menusStyle:Object,bodyStyle:Object,gridStyle:Object,itemStyle:Object,responsive:{type:Boolean,default:null}},Kt={"update:modelValue":e=>!0,change:e=>!0,visibleChange:e=>!0,clear:()=>!0,focus:e=>!0,blur:e=>!0},Pt=Y({name:"EleIconSelect",components:{EleBasicSelect:vt,IconGrid:jt},props:Mt,emits:Kt,setup(e,{emit:l}){const i=lt(e),s={keyword:""},c=$(null),d=$(!1),f=$([]),t=$(),n=$([]),y=$(),C=$([]),B=z(()=>!(!f.value||!f.value.length||e.hideOnSingleTab&&f.value.length===1)),h=z(()=>{const v=["ele-icon-select-popper"];return i.value&&v.push("is-responsive"),e.popperClass&&v.push(e.popperClass),v.join(" ")}),r=z(()=>{if(e.popperHeight)return{height:typeof e.popperHeight=="number"?`${e.popperHeight}px`:e.popperHeight}}),m=()=>{c.value&&c.value.updatePopper()},b=()=>{if(e.data==null||!e.data.length||typeof e.data[0]=="string"){f.value=[],n.value=[],t.value=void 0,y.value=void 0,C.value=S(e.data);return}f.value=e.data.map(K=>K.title),(t.value==null||t.value>=f.value.length)&&(t.value=0);const v=e.data[t.value];if(typeof v!="string"&&v.children!=null&&v.children.length){n.value=v.children.map(K=>K.title),(y.value==null||y.value>=n.value.length)&&(y.value=0),C.value=S(v.children[y.value].icons);return}n.value=[],y.value=void 0,C.value=typeof v!="string"?S(v.icons):[]},S=v=>v?s.keyword?v.filter(K=>K.toLowerCase().includes(s.keyword)):v:[],_=v=>{v&&j(""),d.value!==v&&(d.value=v,l("visibleChange",v))},u=v=>{bt(v,e.modelValue)&&(l("update:modelValue",v),l("change",v))},g=()=>{u(null),_(!1),l("clear")},I=v=>{l("focus",v)},k=v=>{l("blur",v)},j=v=>{var K;if(s.keyword=v?v.toLowerCase():"",b(),!(!((K=e.data)!=null&&K.length)||C.value.length))for(let R=0;R<e.data.length;R++){const A=e.data[R];if(typeof A=="string")return;if(A.children!=null&&A.children.length)for(let U=0;U<A.children.length;U++){const W=A.children[U].icons;if(W&&W.some(ue=>ue.toLowerCase().includes(s.keyword))){y.value=U,t.value=R,b();return}}else if(A.icons!=null&&A.icons.some(U=>U.toLowerCase().includes(s.keyword))){t.value=R,b();return}}},T=v=>{t.value=v,b()},L=v=>{y.value=v,b()},de=v=>{u(v),_(!1)};return Z(()=>e.data,()=>{b()},{immediate:!0,deep:!0}),{selectRef:c,selectVisible:d,tabs:f,tabActive:t,menus:n,menuActive:y,icons:C,tabBar:B,selectPopperClass:h,iconPopperStyle:r,updatePopover:m,updateVisible:_,onSelectClear:g,onSelectFocus:I,onSelectBlur:k,onSelectFilter:j,onTabClick:T,onMenuClick:L,onIconSelect:de}}}),zt=(e,l)=>{const i=e.__vccOpts||e;for(const[s,c]of l)i[s]=c;return i},At=["onClick"],Ut={class:"ele-icon-select-main"},Ft=["onClick"];function Ht(e,l,i,s,c,d){const f=se("IconGrid"),t=se("EleBasicSelect");return V(),N(t,{ref:"selectRef",value:e.modelValue,multiple:!1,disabled:e.disabled,size:e.size,clearable:e.clearable,placeholder:e.placeholder,automaticDropdown:e.automaticDropdown,filterable:e.filterable,teleported:e.teleported,persistent:e.persistent,placement:e.placement,transition:e.transition,popperWidth:e.popperWidth,popperOptions:e.popperOptions,popperClass:e.selectPopperClass,selectClass:"is-icon-select",selectStyle:e.selectStyle,inputStyle:e.inputStyle,selectedLabel:e.modelValue,visible:e.selectVisible,"onUpdate:visible":e.updateVisible,onFilterChange:e.onSelectFilter,onClear:e.onSelectClear,onFocus:e.onSelectFocus,onBlur:e.onSelectBlur},Ie({default:o(()=>[H("div",{class:"ele-icon-select",style:x(e.iconPopperStyle)},[e.tabBar?(V(),M("div",{key:0,class:"ele-icon-select-header",style:x(e.headerStyle)},[J(e.$slots,"tabLeftExtra"),e.tabBar?(V(),M("div",{key:0,class:"ele-icon-select-tabs",style:x(e.tabsStyle)},[(V(!0),M(fe,null,ye(e.tabs,(n,y)=>(V(),M("div",{key:y+"-"+n,class:he(["ele-icon-select-tab",{"is-active":y===e.tabActive}]),onClick:C=>e.onTabClick(y)},Q(n),11,At))),128))],4)):F("",!0),J(e.$slots,"tabRightExtra")],4)):F("",!0),H("div",Ut,[e.menus&&e.menus.length?(V(),M("div",{key:0,class:"ele-icon-select-menus",style:x(e.menusStyle)},[(V(!0),M(fe,null,ye(e.menus,(n,y)=>(V(),M("div",{key:y+"-"+n,class:he(["ele-icon-select-menu",{"is-active":y===e.menuActive}]),onClick:C=>e.onMenuClick(y)},Q(n),11,Ft))),128))],4)):F("",!0),a(f,{data:e.icons,icon:e.modelValue,emptyProps:e.emptyProps,tooltip:e.tooltip,tooltipProps:e.tooltipProps,popperVisible:e.selectVisible,gridStyle:e.gridStyle,itemStyle:e.itemStyle,style:x(e.bodyStyle),onSelect:e.onIconSelect},Ie({_:2},[e.$slots.icon?{name:"icon",fn:o(n=>[J(e.$slots,"icon",at(nt(n||{})))]),key:"0"}:void 0]),1032,["data","icon","emptyProps","tooltip","tooltipProps","popperVisible","gridStyle","itemStyle","style","onSelect"])])],4)]),_:2},[e.modelValue&&e.$slots.icon?{name:"prefix",fn:o(()=>[J(e.$slots,"icon",{icon:e.modelValue,prefix:!0})]),key:"0"}:void 0]),1032,["value","disabled","size","clearable","placeholder","automaticDropdown","filterable","teleported","persistent","placement","transition","popperWidth","popperOptions","popperClass","selectStyle","inputStyle","selectedLabel","visible","onUpdate:visible","onFilterChange","onClear","onFocus","onBlur"])}const Lt=zt(Pt,[["render",Ht]]),Rt={},xt={viewBox:"64 64 896 896"},Dt=H("path",{d:"M840 836H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm0-724H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM610.8 378c6 0 9.4-7 5.7-11.7L515.7 238.7a7.14 7.14 0 00-11.3 0L403.6 366.3a7.23 7.23 0 005.7 11.7H476v268h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V378h62.8z"},null,-1),qt=[Dt];function Wt(e,l){return V(),M("svg",xt,qt)}const Gt=Be(Rt,[["render",Wt]]),Jt={},Qt={viewBox:"64 64 896 896"},Yt=H("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zm-353.6-74.7c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zm11.4 225.4a7.14 7.14 0 00-11.3 0L405.6 752.3a7.23 7.23 0 005.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"},null,-1),Zt=[Yt];function Xt(e,l){return V(),M("svg",Qt,Zt)}const el=Be(Jt,[["render",Xt]]),tl={__name:"menu-search",emits:["search"],setup(e,{emit:l}){const i=l,{form:s,resetFields:c}=je({title:"",path:"",authority:""}),d=()=>{i("search",s)},f=()=>{c(),d()};return(t,n)=>{const y=Me,C=Ke,B=He,h=ge,r=Le,m=Pe,b=Fe;return V(),N(b,{"body-style":{paddingBottom:"2px"}},{default:o(()=>[a(m,{"label-width":"72px",onKeyup:ot(d,["enter"])},{default:o(()=>[a(r,{gutter:8},{default:o(()=>[a(B,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[a(C,{label:"菜单名称"},{default:o(()=>[a(y,{clearable:"",modelValue:p(s).title,"onUpdate:modelValue":n[0]||(n[0]=S=>p(s).title=S),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),a(B,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[a(C,{label:"菜单地址"},{default:o(()=>[a(y,{clearable:"",modelValue:p(s).path,"onUpdate:modelValue":n[1]||(n[1]=S=>p(s).path=S),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),a(B,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[a(C,{label:"权限标识"},{default:o(()=>[a(y,{clearable:"",modelValue:p(s).authority,"onUpdate:modelValue":n[2]||(n[2]=S=>p(s).authority=S),modelModifiers:{trim:!0},placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),a(B,{lg:6,md:12,sm:12,xs:24},{default:o(()=>[a(C,{"label-width":"16px"},{default:o(()=>[a(h,{type:"primary",onClick:d},{default:o(()=>[E("查询")]),_:1}),a(h,{onClick:f},{default:o(()=>[E("重置")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};function xe(e){return q(this,null,function*(){const l=yield re.get("/system/menu/list",{params:e});return l.data.code===0&&l.data.data?l.data.data:Promise.reject(new Error(l.data.message))})}function ll(e){return q(this,null,function*(){const l=yield re.post("/system/menu/save",e);return l.data.code===0?l.data.message:Promise.reject(new Error(l.data.message))})}function nl(e){return q(this,null,function*(){const l=yield re.put("/system/menu/update",e);return l.data.code===0?l.data.message:Promise.reject(new Error(l.data.message))})}function al(e){return q(this,null,function*(){const l=yield re.delete("/system/menu/remove?id="+e);return l.data.code===0?l.data.message:Promise.reject(new Error(l.data.message))})}const ol={__name:"menu-select",props:{modelValue:Number,placeholder:{type:String,default:"请选择上级菜单"}},emits:["update:modelValue"],setup(e,{emit:l}){const i=l,s=$([]),c=d=>{i("update:modelValue",d||0)};return xe().then(d=>{s.value=ze({data:d,idField:"menuId",parentIdField:"parentId"})}).catch(d=>{D.error(d.message)}),(d,f)=>{const t=Et;return V(),N(t,{clearable:"",data:s.value,"check-strictly":"","default-expand-all":"","node-key":"menuId",props:{label:"title"},placeholder:e.placeholder,"model-value":e.modelValue||void 0,class:"ele-fluid","onUpdate:modelValue":c},null,8,["data","placeholder","model-value"])}}},sl={components:ve,data(){return{iconData:Object.keys(ve)}}},il=Object.assign(sl,{__name:"icon-select",props:{modelValue:String,disabled:Boolean,placeholder:{type:String,default:"请选择菜单图标"}},emits:["update:modelValue"],setup(e,{emit:l}){const i=l,s=c=>{i("update:modelValue",c)};return(c,d)=>{const f=Ve,t=Lt;return V(),N(t,{clearable:"",data:c.iconData,"model-value":e.modelValue,placeholder:e.placeholder,disabled:e.disabled,"popper-width":420,"popper-height":280,"grid-style":{gridTemplateColumns:"repeat(6, 1fr)"},"item-style":{height:"52px"},"onUpdate:modelValue":s},{icon:o(({icon:n})=>[a(f,null,{default:o(()=>[(V(),N(Ae(n)))]),_:2},1024)]),_:1},8,["data","model-value","placeholder","disabled","grid-style"])}}}),rl={__name:"menu-edit",props:{modelValue:Boolean,data:Object,parentId:Number},emits:["done","update:modelValue"],setup(e,{emit:l}){const i=l,s=e,c=$(!1),d=$(!1),f=$(null),{form:t,resetFields:n,assignFields:y}=je({menuId:void 0,parentId:void 0,title:"",menuType:0,openType:0,icon:"",path:"",component:"",authority:"",sortNumber:void 0,hide:0,meta:""}),C=te({title:[{required:!0,type:"string",message:"请输入菜单名称",trigger:"blur"}],sortNumber:[{required:!0,type:"number",message:"请输入排序号",trigger:"blur"}],meta:[{type:"string",validator:(_,u,g)=>{if(u){const I="请输入正确的JSON格式";try{const k=JSON.parse(u);if(k==null||typeof k!="object")return g(I)}catch(k){return g(I)}}g()},trigger:"blur"}]}),B=()=>{var _,u;(u=(_=f.value)==null?void 0:_.validate)==null||u.call(_,g=>{if(!g)return;d.value=!0,(c.value?nl:ll)(P(w({},t),{menuType:t.menuType===2?1:0,parentId:t.parentId||0})).then(k=>{d.value=!1,D.success(k),h(!1),i("done")}).catch(k=>{d.value=!1,D.error(k.message)})})},h=_=>{i("update:modelValue",_)},r=()=>{t.menuType===0?(t.authority="",t.openType=0,t.component=""):t.menuType===1?t.openType===2&&(t.authority=""):(t.openType=0,t.icon="",t.path="",t.component="",t.hide=0)},m=()=>{t.openType===2&&(t.component="",t.authority="")},b=_=>{t.hide=_?0:1},S=_=>{var u;return!!((u=_.children)!=null&&u.length)&&!_.component};return Z(()=>s.modelValue,_=>{var u,g;if(_)if(s.data){const I=ie(s.data.path),k=ie(s.data.component),j=s.data.menuType===1?2:S(s.data)?0:1;y(P(w({},s.data),{menuType:j,openType:I?2:k?1:0,parentId:s.data.parentId===0?void 0:s.data.parentId})),c.value=!0}else t.parentId=s.parentId,c.value=!1;else n(),(g=(u=f.value)==null?void 0:u.clearValidate)==null||g.call(u)}),(_,u)=>{const g=Ke,I=Me,k=He,j=st,T=it,L=Le,de=Ue,v=Ve,K=Ne,R=ht,A=rt,U=Pe,W=ge,ue=dt;return V(),N(ue,{form:"",width:740,"model-value":e.modelValue,title:c.value?"修改菜单":"新建菜单","onUpdate:modelValue":h},{footer:o(()=>[a(W,{onClick:u[10]||(u[10]=O=>h(!1))},{default:o(()=>[E("取消")]),_:1}),a(W,{type:"primary",loading:d.value,onClick:B},{default:o(()=>[E(" 保存 ")]),_:1},8,["loading"])]),default:o(()=>[a(U,{ref_key:"formRef",ref:f,model:p(t),rules:C,"label-width":"92px"},{default:o(()=>[a(L,{gutter:16},{default:o(()=>[a(k,{sm:12,xs:24},{default:o(()=>[a(g,{label:"上级菜单",prop:"parentId"},{default:o(()=>[a(ol,{modelValue:p(t).parentId,"onUpdate:modelValue":u[0]||(u[0]=O=>p(t).parentId=O)},null,8,["modelValue"])]),_:1}),a(g,{label:"菜单名称",prop:"title"},{default:o(()=>[a(I,{clearable:"",maxlength:20,modelValue:p(t).title,"onUpdate:modelValue":u[1]||(u[1]=O=>p(t).title=O),placeholder:"请输入菜单名称"},null,8,["modelValue"])]),_:1})]),_:1}),a(k,{sm:12,xs:24},{default:o(()=>[a(g,{label:"菜单类型",prop:"menuType"},{default:o(()=>[a(T,{modelValue:p(t).menuType,"onUpdate:modelValue":u[2]||(u[2]=O=>p(t).menuType=O),onChange:r},{default:o(()=>[a(j,{label:0},{default:o(()=>[E("目录")]),_:1}),a(j,{label:1},{default:o(()=>[E("菜单")]),_:1}),a(j,{label:2},{default:o(()=>[E("按钮")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(g,{label:"打开方式"},{default:o(()=>[a(T,{modelValue:p(t).openType,"onUpdate:modelValue":u[3]||(u[3]=O=>p(t).openType=O),disabled:p(t).menuType===0||p(t).menuType===2,onChange:m},{default:o(()=>[a(j,{label:0},{default:o(()=>[E("组件")]),_:1}),a(j,{label:1},{default:o(()=>[E("内链")]),_:1}),a(j,{label:2},{default:o(()=>[E("外链")]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),a(de,{style:{margin:"8px 0 22px 0",opacity:"0.6"}}),a(L,{gutter:16},{default:o(()=>[a(k,{sm:12,xs:24},{default:o(()=>[a(g,{label:"菜单图标",prop:"icon"},{default:o(()=>[a(il,{modelValue:p(t).icon,"onUpdate:modelValue":u[4]||(u[4]=O=>p(t).icon=O),disabled:p(t).menuType===2},null,8,["modelValue","disabled"])]),_:1}),a(g,{prop:"path"},{label:o(()=>[p(t).openType===2?(V(),N(K,{key:0,content:"需要以`http://`、`https://`、`//`开头"},{default:o(()=>[a(v,{size:16,style:{"align-self":"center","margin-right":"4px",cursor:"help"}},{default:o(()=>[a(p(pe),{style:{opacity:"0.6"}})]),_:1})]),_:1})):F("",!0),H("span",null,Q(p(t).openType===2?"外链地址":"路由地址"),1)]),default:o(()=>[a(I,{clearable:"",maxlength:100,modelValue:p(t).path,"onUpdate:modelValue":u[5]||(u[5]=O=>p(t).path=O),disabled:p(t).menuType===2,placeholder:p(t).openType===2?"请输入外链地址":"请输入路由地址"},null,8,["modelValue","disabled","placeholder"])]),_:1}),a(g,{prop:"component"},{label:o(()=>[p(t).openType===1?(V(),N(K,{key:0,content:"需要以`http://`、`https://`、`//`开头"},{default:o(()=>[a(v,{size:16,style:{"align-self":"center","margin-right":"4px",cursor:"help"}},{default:o(()=>[a(p(pe),{style:{opacity:"0.6"}})]),_:1})]),_:1})):F("",!0),H("span",null,Q(p(t).openType===1?"内链地址":"组件路径"),1)]),default:o(()=>[a(I,{clearable:"",maxlength:100,modelValue:p(t).component,"onUpdate:modelValue":u[6]||(u[6]=O=>p(t).component=O),disabled:p(t).menuType===0||p(t).menuType===2||p(t).openType===2,placeholder:p(t).openType===1?"请输入内链地址":"请输入组件路径"},null,8,["modelValue","disabled","placeholder"])]),_:1})]),_:1}),a(k,{sm:12,xs:24},{default:o(()=>[a(g,{label:"权限标识",prop:"authority"},{default:o(()=>[a(I,{clearable:"",modelValue:p(t).authority,"onUpdate:modelValue":u[7]||(u[7]=O=>p(t).authority=O),placeholder:"请输入权限标识",disabled:p(t).menuType===0||p(t).menuType===1&&p(t).openType===2},null,8,["modelValue","disabled"])]),_:1}),a(g,{label:"排序号",prop:"sortNumber"},{default:o(()=>[a(R,{min:0,max:99999,modelValue:p(t).sortNumber,"onUpdate:modelValue":u[8]||(u[8]=O=>p(t).sortNumber=O),placeholder:"请输入排序号","controls-position":"right",class:"ele-fluid"},null,8,["modelValue"])]),_:1}),a(g,{label:"是否展示"},{default:o(()=>[a(A,{"inline-prompt":"","active-text":"是","inactive-text":"否","model-value":p(t).hide===0,disabled:p(t).menuType===2,onChange:b},null,8,["model-value","disabled"]),a(K,{content:"选择不展示只注册路由不展示在侧边栏, 比如添加页面应该选择不展示","popper-style":{maxWidth:"240px"}},{default:o(()=>[a(v,{size:16,style:{"margin-left":"16px",cursor:"help"}},{default:o(()=>[a(p(pe),{style:{opacity:"0.6"}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(g,{label:"路由元数据",prop:"meta"},{default:o(()=>[a(I,{rows:4,type:"textarea",maxlength:200,modelValue:p(t).meta,"onUpdate:modelValue":u[9]||(u[9]=O=>p(t).meta=O),placeholder:"请输入JSON格式的路由元数据"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["model-value","title"])}}},dl={name:"SystemMenu",components:ve},Vl=Object.assign(dl,{setup(e){const l=$(null),i=$([{prop:"title",label:"菜单名称",slot:"title",minWidth:160},{prop:"path",label:"路由地址",minWidth:110},{prop:"sortNumber",label:"排序",width:100,align:"center"},{prop:"hide",label:"可见",width:100,align:"center",formatter:r=>["是","否"][r.hide]},{prop:"menuType",label:"类型",width:100,align:"center",slot:"menuType"},{columnKey:"action",label:"操作",width:180,align:"center",slot:"action"}]),s=$(null),c=$(!1),d=$(),f=m=>q(this,[m],function*({where:r}){const b=yield xe(w({},r));return ze({data:b,idField:"menuId",parentIdField:"parentId"})}),t=r=>{var m,b;(b=(m=l.value)==null?void 0:m.reload)==null||b.call(m,{where:r})},n=(r,m)=>{s.value=r!=null?r:null,d.value=m,c.value=!0},y=r=>{var m;if((m=r.children)!=null&&m.length){D.error("请先删除子节点");return}ct.confirm("确定要删除“"+r.title+"”吗?","系统提示",{type:"warning",draggable:!0}).then(()=>{const b=D.loading("请求中..");al(r.menuId).then(S=>{b.close(),D.success(S),t()}).catch(S=>{b.close(),D.error(S.message)})}).catch(()=>{})},C=()=>{var r,m;(m=(r=l.value)==null?void 0:r.toggleRowExpansionAll)==null||m.call(r,!0)},B=()=>{var r,m;(m=(r=l.value)==null?void 0:r.toggleRowExpansionAll)==null||m.call(r,!1)},h=r=>{var m;return!!((m=r.children)!=null&&m.length)&&!r.component};return(r,m)=>{const b=ge,S=Ve,_=pt,u=mt,g=Ue,I=yt,k=Fe,j=_t;return V(),N(j,{"hide-footer":"","flex-table":!0},{default:o(()=>[a(tl,{onSearch:t}),a(k,{"body-style":{padding:"2px 10px 10px 10px"},"flex-table":!0},{default:o(()=>[a(I,{sticky:"",ref_key:"tableRef",ref:l,"row-key":"menuId",columns:i.value,datasource:f,"show-overflow-tooltip":!0,"highlight-current-row":"","default-expand-all":!1,pagination:!1,border:!0,"cache-key":"systemMenuTable"},{toolbar:o(()=>[a(b,{type:"primary",class:"ele-btn-icon",icon:p(ut),onClick:m[0]||(m[0]=T=>n())},{default:o(()=>[E(" 新建 ")]),_:1},8,["icon"]),a(b,{class:"ele-btn-icon",icon:p(Gt),onClick:C},{default:o(()=>[E(" 展开全部 ")]),_:1},8,["icon"]),a(b,{class:"ele-btn-icon",icon:p(el),onClick:B},{default:o(()=>[E(" 折叠全部 ")]),_:1},8,["icon"])]),title:o(({row:T})=>[T.icon?(V(),N(S,{key:0,size:16,style:{"margin-right":"8px","vertical-align":"-2px"}},{default:o(()=>[(V(),N(Ae(T.icon)))]),_:2},1024)):F("",!0),H("span",null,Q(T.title),1)]),menuType:o(({row:T})=>[p(ie)(T.path)?(V(),N(_,{key:0,size:"small",type:"danger","disable-transitions":!0},{default:o(()=>[E(" 外链 ")]),_:1})):p(ie)(T.component)?(V(),N(_,{key:1,size:"small",type:"warning","disable-transitions":!0},{default:o(()=>[E(" 内链 ")]),_:1})):h(T)?(V(),N(_,{key:2,size:"small","disable-transitions":!0},{default:o(()=>[E(" 目录 ")]),_:1})):T.menuType===0?(V(),N(_,{key:3,size:"small",type:"success","disable-transitions":!0},{default:o(()=>[E(" 菜单 ")]),_:1})):T.menuType===1?(V(),N(_,{key:4,size:"small",type:"info","disable-transitions":!0},{default:o(()=>[E(" 按钮 ")]),_:1})):F("",!0)]),action:o(({row:T})=>[a(u,{type:"primary",underline:!1,onClick:L=>n(null,T.menuId)},{default:o(()=>[E(" 添加 ")]),_:2},1032,["onClick"]),a(g,{direction:"vertical"}),a(u,{type:"primary",underline:!1,onClick:L=>n(T)},{default:o(()=>[E(" 修改 ")]),_:2},1032,["onClick"]),a(g,{direction:"vertical"}),a(u,{type:"danger",underline:!1,onClick:L=>y(T)},{default:o(()=>[E(" 删除 ")]),_:2},1032,["onClick"])]),_:1},8,["columns"])]),_:1}),a(rl,{modelValue:c.value,"onUpdate:modelValue":m[1]||(m[1]=T=>c.value=T),data:s.value,"parent-id":d.value,onDone:t},null,8,["modelValue","data","parent-id"])]),_:1})}}});export{Vl as default};
