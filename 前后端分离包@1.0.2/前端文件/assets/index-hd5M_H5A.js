var M=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var $=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))J.call(t,n)&&$(e,n,t[n]);if(_)for(var n of _(t))Q.call(t,n)&&$(e,n,t[n]);return e},x=(e,t)=>Y(e,Z(t));var V=(e,t,n)=>new Promise((l,s)=>{var a=i=>{try{d(n.next(i))}catch(c){s(c)}},r=i=>{try{d(n.throw(i))}catch(c){s(c)}},d=i=>i.done?l(i.value):Promise.resolve(i.value).then(a,r);d((n=n.apply(e,t)).next())});import{r as O,m as U,cq as W,bE as X,a9 as j,cr as ee,bn as b,w as te,d as ne,a5 as R,a4 as L,cs as le,bS as S,b5 as se,S as D,bu as q,ct as p,bP as A,bD as G,bG as oe,cu as ae,ac as re,v as P,bL as ie,o as k,p as w,af as I,a6 as E,ag as ce,t as de,n as N,cd as ue,cc as ve,j as y}from"./index-DKVio5DX.js";function ge(e){let t;const n=O(!1),l=U(x(m({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function s(o){l.text=o}function a(){const o=l.parent,u=g.ns;if(!o.vLoadingAddClassList){let v=o.getAttribute("loading-number");v=Number.parseInt(v)-1,v?o.setAttribute("loading-number",v.toString()):(S(o,u.bm("parent","relative")),o.removeAttribute("loading-number")),S(o,u.bm("parent","hidden"))}r(),f.unmount()}function r(){var o,u;(u=(o=g.$el)==null?void 0:o.parentNode)==null||u.removeChild(g.$el)}function d(){var o;e.beforeClose&&!e.beforeClose()||(n.value=!0,clearTimeout(t),t=window.setTimeout(i,400),l.visible=!1,(o=e.closed)==null||o.call(e))}function i(){if(!n.value)return;const o=l.parent;n.value=!1,o.vLoadingAddClassList=void 0,a()}const c=j({name:"ElLoading",setup(o,{expose:u}){const{ns:v,zIndex:F}=ee("loading");return u({ns:v,zIndex:F}),()=>{const B=l.spinner||l.svg,H=b("svg",m({class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50"},B?{innerHTML:B}:{}),[b("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),K=l.text?b("p",{class:v.b("text")},[l.text]):void 0;return b(le,{name:v.b("fade"),onAfterLeave:i},{default:te(()=>[L(ne("div",{style:{backgroundColor:l.background||""},class:[v.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[b("div",{class:v.b("spinner")},[H,K])]),[[R,l.visible]])])})}}}),f=W(c),g=f.mount(document.createElement("div"));return x(m({},X(l)),{setText:s,removeElLoadingChild:r,close:d,handleAfterLeave:i,vm:g,get $el(){return g.$el}})}let C;const fe=function(e={}){if(!se)return;const t=me(e);if(t.fullscreen&&C)return C;const n=ge(x(m({},t),{closed:()=>{var s;(s=t.closed)==null||s.call(t),t.fullscreen&&(C=void 0)}}));be(t,t.parent,n),z(t,t.parent,n),t.parent.vLoadingAddClassList=()=>z(t,t.parent,n);let l=t.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",t.parent.setAttribute("loading-number",l),t.parent.appendChild(n.$el),D(()=>n.visible.value=t.visible),t.fullscreen&&(C=n),n},me=e=>{var t,n,l,s;let a;return q(e.target)?a=(t=document.querySelector(e.target))!=null?t:document.body:a=e.target||document.body,{parent:a===document.body||e.body?document.body:a,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:a===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(l=e.lock)!=null?l:!1,customClass:e.customClass||"",visible:(s=e.visible)!=null?s:!0,target:a}},be=(e,t,n)=>V(void 0,null,function*(){const{nextZIndex:l}=n.vm.zIndex||n.vm._.exposed.zIndex,s={};if(e.fullscreen)n.originalPosition.value=p(document.body,"position"),n.originalOverflow.value=p(document.body,"overflow"),s.zIndex=l();else if(e.parent===document.body){n.originalPosition.value=p(document.body,"position"),yield D();for(const a of["top","left"]){const r=a==="top"?"scrollTop":"scrollLeft";s[a]=`${e.target.getBoundingClientRect()[a]+document.body[r]+document.documentElement[r]-Number.parseInt(p(document.body,`margin-${a}`),10)}px`}for(const a of["height","width"])s[a]=`${e.target.getBoundingClientRect()[a]}px`}else n.originalPosition.value=p(t,"position");for(const[a,r]of Object.entries(s))n.$el.style[a]=r}),z=(e,t,n)=>{const l=n.vm.ns||n.vm._.exposed.ns;["absolute","fixed","sticky"].includes(n.originalPosition.value)?S(t,l.bm("parent","relative")):A(t,l.bm("parent","relative")),e.fullscreen&&e.lock?A(t,l.bm("parent","hidden")):S(t,l.bm("parent","hidden"))},h=Symbol("ElLoading"),T=(e,t)=>{var n,l,s,a;const r=t.instance,d=o=>G(t.value)?t.value[o]:void 0,i=o=>{const u=q(o)&&(r==null?void 0:r[o])||o;return u&&O(u)},c=o=>i(d(o)||e.getAttribute(`element-loading-${ae(o)}`)),f=(n=d("fullscreen"))!=null?n:t.modifiers.fullscreen,g={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:f,target:(l=d("target"))!=null?l:f?void 0:e,body:(s=d("body"))!=null?s:t.modifiers.body,lock:(a=d("lock"))!=null?a:t.modifiers.lock};e[h]={options:g,instance:fe(g)}},pe=(e,t)=>{for(const n of Object.keys(t))oe(t[n])&&(t[n].value=e[n])},ye={mounted(e,t){t.value&&T(e,t)},updated(e,t){const n=e[h];t.oldValue!==t.value&&(t.value&&!t.oldValue?T(e,t):t.value&&t.oldValue?G(t.value)&&pe(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[h])==null||t.instance.close()}},xe={loading:Boolean,text:String,background:String,spinner:String,svgViewBox:String,type:{type:String,default:"dot"},blur:Boolean,size:String,spinnerStyle:Object,textStyle:Object},Ce=j({name:"EleLoading",directives:{loading:ye},props:xe,setup(e){const{authenticated:t}=re(),n=P(()=>!t.value||e.type==="circle"),l=P(()=>{const s={class:["ele-loading",{"ele-loading-show":e.loading}]};return n.value&&(s["element-loading-text"]=e.text,s["element-loading-background"]=e.background,s["element-loading-spinner"]=e.spinner,s["element-loading-svg-view-box"]=e.svgViewBox),s});return{isCircle:n,rootProps:l}}}),Se=(e,t)=>{const n=e.__vccOpts||e;for(const[l,s]of t)n[l]=s;return n},ke=y("div",{class:"ele-loading-dot"},[y("i"),y("i"),y("i"),y("i")],-1);function we(e,t,n,l,s,a){const r=ie("loading");return L((k(),w("div",ue(ve(e.rootProps)),[I(e.$slots,"default"),e.isCircle?N("",!0):L((k(),w("div",{key:0,style:E(e.spinnerStyle),class:ce(["ele-loading-spinner",{"ele-loading-blur":e.blur},{"ele-loading-small":e.size==="small"},{"ele-loading-large":e.size==="large"}])},[I(e.$slots,"spinner",{},()=>[ke]),e.text?(k(),w("div",{key:0,class:"ele-loading-text",style:E(e.textStyle)},de(e.text),5)):N("",!0)],6)),[[R,e.loading]])],16)),[[r,e.isCircle&&e.loading]])}const Be=Se(Ce,[["render",we]]);export{Be as i,ye as v};
