var ce=Object.defineProperty,de=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var Y=(t,c,u)=>c in t?ce(t,c,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[c]=u,H=(t,c)=>{for(var u in c||(c={}))pe.call(c,u)&&Y(t,u,c[u]);if(L)for(var u of L(c))be.call(c,u)&&Y(t,u,c[u]);return t},J=(t,c)=>de(t,me(c));import{aA as fe,bX as ve,bi as b,d1 as ne,d2 as F,cw as I,d3 as y,a9 as te,b7 as Ne,aB as Ve,r as he,m as ye,cK as Ie,v as h,bw as _,bW as we,cW as ge,i as Ee,bs as _e,bN as Se,o as f,p as T,a4 as X,b as a,ag as K,a as S,d as z,w as j,y as Ae,c as A,d4 as Pe,A as q,n as Q,bJ as Fe,x as xe,R as P,E as Ce,aC as ke,bx as Be,bu as De,bm as Z,aD as Te}from"./index-DKVio5DX.js";import{v as ee}from"./index-8oT0IIFa.js";const Ke=fe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ve,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||b(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),ze={[ne]:(t,c)=>c!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[F]:t=>b(t)||I(t),[y]:t=>b(t)||I(t)},Me=["aria-label","onKeydown"],Oe=["aria-label","onKeydown"],Ue=te({name:"ElInputNumber"}),We=te(J(H({},Ue),{props:Ke,emits:ze,setup(t,{expose:c,emit:u}){const l=t,{t:M}=Ne(),m=Ve("input-number"),N=he(),s=ye({currentValue:l.modelValue,userInput:null}),{formItem:v}=Ie(),O=h(()=>b(l.modelValue)&&l.modelValue<=l.min),U=h(()=>b(l.modelValue)&&l.modelValue>=l.max),ae=h(()=>{const e=R(l.step);return _(l.precision)?Math.max(R(l.modelValue),e):(e>l.precision,l.precision)}),x=h(()=>l.controls&&l.controlsPosition==="right"),W=we(),V=ge(),C=h(()=>{if(s.userInput!==null)return s.userInput;let e=s.currentValue;if(I(e))return"";if(b(e)){if(Number.isNaN(e))return"";_(l.precision)||(e=e.toFixed(l.precision))}return e}),k=(e,n)=>{if(_(n)&&(n=ae.value),n===0)return Math.round(e);let r=String(e);const i=r.indexOf(".");if(i===-1||!r.replace(".","").split("")[i+n])return e;const g=r.length;return r.charAt(g-1)==="5"&&(r=`${r.slice(0,Math.max(0,g-1))}6`),Number.parseFloat(Number(r).toFixed(n))},R=e=>{if(I(e))return 0;const n=e.toString(),r=n.indexOf(".");let i=0;return r!==-1&&(i=n.length-r-1),i},$=(e,n=1)=>b(e)?k(e+l.step*n):s.currentValue,B=()=>{if(l.readonly||V.value||U.value)return;const e=Number(C.value)||0,n=$(e);w(n),u(F,s.currentValue)},D=()=>{if(l.readonly||V.value||O.value)return;const e=Number(C.value)||0,n=$(e,-1);w(n),u(F,s.currentValue)},G=(e,n)=>{const{max:r,min:i,step:o,precision:p,stepStrictly:g,valueOnClear:E}=l;r<i&&Be("InputNumber","min should not be greater than max.");let d=Number(e);if(I(e)||Number.isNaN(d))return null;if(e===""){if(E===null)return null;d=De(E)?{min:i,max:r}[E]:E}return g&&(d=k(Math.round(d/o)*o,p)),_(p)||(d=k(d,p)),(d>r||d<i)&&(d=d>r?r:i,n&&u(y,d)),d},w=(e,n=!0)=>{var r;const i=s.currentValue,o=G(e);if(!n){u(y,o);return}i!==o&&(s.userInput=null,u(y,o),u(ne,o,i),l.validateEvent&&((r=v==null?void 0:v.validate)==null||r.call(v,"change").catch(p=>Z())),s.currentValue=o)},re=e=>{s.userInput=e;const n=e===""?null:Number(e);u(F,n),w(n,!1)},le=e=>{const n=e!==""?Number(e):"";(b(n)&&!Number.isNaN(n)||e==="")&&w(n),s.userInput=null},ue=()=>{var e,n;(n=(e=N.value)==null?void 0:e.focus)==null||n.call(e)},se=()=>{var e,n;(n=(e=N.value)==null?void 0:e.blur)==null||n.call(e)},ie=e=>{u("focus",e)},oe=e=>{var n;s.userInput=null,u("blur",e),l.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(r=>Z()))};return Ee(()=>l.modelValue,(e,n)=>{const r=G(e,!0);s.userInput===null&&r!==n&&(s.currentValue=r)},{immediate:!0}),_e(()=>{var e;const{min:n,max:r,modelValue:i}=l,o=(e=N.value)==null?void 0:e.input;if(o.setAttribute("role","spinbutton"),Number.isFinite(r)?o.setAttribute("aria-valuemax",String(r)):o.removeAttribute("aria-valuemax"),Number.isFinite(n)?o.setAttribute("aria-valuemin",String(n)):o.removeAttribute("aria-valuemin"),o.setAttribute("aria-valuenow",s.currentValue||s.currentValue===0?String(s.currentValue):""),o.setAttribute("aria-disabled",String(V.value)),!b(i)&&i!=null){let p=Number(i);Number.isNaN(p)&&(p=null),u(y,p)}}),Se(()=>{var e,n;const r=(e=N.value)==null?void 0:e.input;r==null||r.setAttribute("aria-valuenow",`${(n=s.currentValue)!=null?n:""}`)}),c({focus:ue,blur:se}),(e,n)=>(f(),T("div",{class:K([a(m).b(),a(m).m(a(W)),a(m).is("disabled",a(V)),a(m).is("without-controls",!e.controls),a(m).is("controls-right",a(x))]),onDragstart:n[1]||(n[1]=P(()=>{},["prevent"]))},[e.controls?X((f(),T("span",{key:0,role:"button","aria-label":a(M)("el.inputNumber.decrease"),class:K([a(m).e("decrease"),a(m).is("disabled",a(O))]),onKeydown:S(D,["enter"])},[z(a(q),null,{default:j(()=>[a(x)?(f(),A(a(Ae),{key:0})):(f(),A(a(Pe),{key:1}))]),_:1})],42,Me)),[[a(ee),D]]):Q("v-if",!0),e.controls?X((f(),T("span",{key:1,role:"button","aria-label":a(M)("el.inputNumber.increase"),class:K([a(m).e("increase"),a(m).is("disabled",a(U))]),onKeydown:S(B,["enter"])},[z(a(q),null,{default:j(()=>[a(x)?(f(),A(a(Fe),{key:0})):(f(),A(a(xe),{key:1}))]),_:1})],42,Oe)),[[a(ee),B]]):Q("v-if",!0),z(a(Ce),{id:e.id,ref_key:"input",ref:N,type:"number",step:e.step,"model-value":a(C),placeholder:e.placeholder,readonly:e.readonly,disabled:a(V),size:a(W),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onWheel:n[0]||(n[0]=P(()=>{},["prevent"])),onKeydown:[S(P(B,["prevent"]),["up"]),S(P(D,["prevent"]),["down"])],onBlur:oe,onFocus:ie,onInput:re,onChange:le},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}}));var Re=ke(We,[["__file","input-number.vue"]]);const Ye=Te(Re);export{Ye as E};
