var H=Object.defineProperty;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var y=(r,a,o)=>a in r?H(r,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[a]=o,E=(r,a)=>{for(var o in a||(a={}))M.call(a,o)&&y(r,o,a[o]);if(x)for(var o of x(a))j.call(a,o)&&y(r,o,a[o]);return r};import{_ as G,O as S,P as A,r as g,m as T,u as J,i as K,o as L,c as Q,w as l,e as V,d as e,b as u,q as w,g as W,f as X,E as Y,a7 as Z,a8 as $,h as ee}from"./index-DKVio5DX.js";import{E as le,a as ae}from"./col-Ru1YGmP5.js";import{i as te}from"./index-1zv9CzUI.js";import{B as oe}from"./index-bSvVF2vt.js";import{z as se,a as ne}from"./zh_Hans-LNKypXxg.js";import{g as re,h as ue}from"./github-markdown-light--sWw-Hw4.js";import{u as ie}from"./index-94H0BTDC.js";import{u as me,a as ce}from"./index-64SfhB4e.js";const de={__name:"edit-form",props:{data:Object},setup(r){const a=r,{currentRoute:o,push:k}=S(),{removePageTab:h,reloadPageTab:I}=A();g(null);const F=T({locale:se,plugins:[re({locale:ne}),ue()],editorConfig:{lineNumbers:!0},uploadImages:n=>Promise.all(n.map(t=>new Promise((c,d)=>{ie(t).then(s=>{console.log("res:",s);const m={url:s.url,alt:s.name,title:s.name};c(m)}).catch(s=>{d(s)})})))}),v=g(!1),_=g(!1),b=g(null),{form:i,resetFields:P,assignFields:C}=J({noticeId:void 0,noticeTitle:"",noticeInfo:"",noticeType:""}),U=T({noticeTitle:[{required:!0,message:"请输入公告标题",type:"string",trigger:"blur"}]}),B=()=>{var n,t;(t=(n=b.value)==null?void 0:n.validate)==null||t.call(n,c=>{if(!c)return;_.value=!0,(v.value?me:ce)(i).then(s=>{_.value=!1,w.success(s),R()}).catch(s=>{_.value=!1,w.error(s.message)})})},O=()=>{h({key:u(o).path}),k("/system/notice")},R=()=>{h({key:u(o).path}),I({fullPath:"/system/notice"})};return K(()=>a.data,()=>{var n,t;a.data?(C(E({},a.data)),v.value=!0):(v.value=!1,P(),(t=(n=b.value)==null?void 0:n.clearValidate)==null||t.call(n))},{immediate:!0}),(n,t)=>{const c=W,d=X,s=te,m=le,D=Y,p=Z,z=$,N=ae,q=ee;return L(),Q(q,{ref_key:"formRef",ref:b,model:u(i),rules:U,"label-width":"80px"},{default:l(()=>[e(N,{gutter:10},{default:l(()=>[e(m,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[e(s,null,{default:l(()=>[e(d,{style:{"margin-left":"-90px","margin-top":"-10px","margin-block":"-10px"}},{default:l(()=>[e(c,{type:"primary",loading:_.value,onClick:B},{default:l(()=>[V(" 保存 ")]),_:1},8,["loading"]),e(c,{onClick:O},{default:l(()=>[V("关闭")]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[e(s,null,{default:l(()=>[e(m,{lg:24,md:24,sm:24,xs:24},{default:l(()=>[e(d,{label:"公告标题",prop:"noticeTitle"},{default:l(()=>[e(D,{clearable:"",maxlength:100,modelValue:u(i).noticeTitle,"onUpdate:modelValue":t[0]||(t[0]=f=>u(i).noticeTitle=f),"show-word-limit":"",placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),e(m,{lg:24,md:24,sm:24,xs:24},{default:l(()=>[e(d,{label:"标题颜色",prop:"noticeType"},{default:l(()=>[e(z,{clearable:"",modelValue:u(i).noticeType,"onUpdate:modelValue":t[1]||(t[1]=f=>u(i).noticeType=f),placeholder:"请选择标题颜色",class:"ele-fluid"},{default:l(()=>[e(p,{value:"",label:"默认"}),e(p,{value:"primary",label:"主题色"}),e(p,{value:"success",label:"绿色"}),e(p,{value:"warning",label:"黄色"}),e(p,{value:"danger",label:"红色"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(m,{lg:24,md:24,sm:24,xs:24},{default:l(()=>[e(oe,{modelValue:u(i).noticeInfo,"onUpdate:modelValue":t[2]||(t[2]=f=>u(i).noticeInfo=f),config:F,height:"600px"},null,8,["modelValue","config"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}},Ee=G(de,[["__scopeId","data-v-b4ccfcc6"]]);export{Ee as E};
