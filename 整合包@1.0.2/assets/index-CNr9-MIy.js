var q=Object.defineProperty,Q=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var z=(a,e,o)=>e in a?q(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,I=(a,e)=>{for(var o in e||(e={}))Y.call(e,o)&&z(a,o,e[o]);if(j)for(var o of j(e))Z.call(e,o)&&z(a,o,e[o]);return a},B=(a,e)=>Q(a,X(e));var w=(a,e,o)=>new Promise((y,v)=>{var b=d=>{try{x(o.next(d))}catch(h){v(h)}},f=d=>{try{x(o.throw(d))}catch(h){v(h)}},x=d=>d.done?y(d.value):Promise.resolve(d.value).then(b,f);x((o=o.apply(a,e)).next())});import{s as D,_ as ee,r,v as te,o as $,c as ae,w as s,F as se,t as u,e as p,d as t,p as P,G as oe,b as g,j as n,H as le,I as S,J as ne,C as ie,D as ce,g as re,l as de,A as ue,K as pe,L as _e,k as fe,M as me,N as ge}from"./index-DKVio5DX.js";import{i as ve}from"./index-JCBdu9eJ.js";import"./index-hd5M_H5A.js";import{E as xe,a as he}from"./col-Ru1YGmP5.js";import{E as ye}from"./progress-5PMSkHEP.js";import{E as be}from"./text-lzaRNwcJ.js";import{i as we}from"./index-1zv9CzUI.js";import{_ as Ee}from"./index-bQp54GjP.js";import{g as Te,h as ke}from"./github-markdown-light--sWw-Hw4.js";import{i as Ie}from"./index-C8m5DZvo.js";function $e(a){return w(this,null,function*(){const e=yield D.get("/agent/console/page",{params:a});return e.data.code===0?e.data.data:Promise.reject(new Error(e.data.message))})}function De(a){return w(this,null,function*(){const e=yield D.get("/agent/console/infoData",{params:a});return e.data.code===0?e.data.data:Promise.reject(new Error(e.data.message))})}function Ce(){return w(this,null,function*(){const a=yield D.get("/agent/console/notice");return a.data.code===0?a.data.data:Promise.reject(new Error(a.data.message))})}const U=a=>(me("data-v-d87f296d"),a=a(),ge(),a),Ne=U(()=>n("div",{class:"statistics-header-text"},"账户余额",-1)),Re={class:"statistics-body"},Ve={class:"statistics-trend-text"},je=U(()=>n("div",{class:"statistics-header-text"},"充值卡库",-1)),ze={class:"statistics-body"},Be={class:"statistics-footer"},Pe={class:"statistics-trend-text"},Se={class:"statistics-trend-text"},Ue={name:"AgentLog"},Le=Object.assign(Ue,{setup(a){const e=r({});De().then(l=>{e.value=l}).catch(l=>{EleMessage.error(l.message)});const o=r([]);Ce().then(l=>{o.value=l});const y=r(null),v=r(null),b=r(null),f=r(!1),x=l=>{y.value=l.noticeTitle,v.value=l.noticeInfo,b.value=l.createTime,f.value=!0},d=r(null),h=te(()=>[{prop:"logId",label:"ID",align:"center",width:60},{prop:"createTime",label:"操作时间",width:180},{prop:"logType",label:"类型",width:90,align:"center",slot:"logType"},{prop:"money",label:"账户余额",width:120,align:"center"},{prop:"consume",label:"已消费",width:120,align:"center"},{prop:"log",label:"详细日志",minWidth:300},{prop:"ip",label:"IP地址",width:160}]),C=r([]),N=r(!0),R=r(null),L=({page:l,limit:c,where:E,orders:m})=>$e(B(I(I({},E),m),{page:l,limit:c}));return(l,c)=>{const E=ie,m=we,T=xe,V=be,k=ce,M=re,A=de,F=ue,H=pe,_=_e,G=fe,J=ye,K=he,O=ve,W=Ie;return $(),ae(W,{"hide-footer":"","flex-table":N.value},{default:s(()=>[t(K,{gutter:16},{default:s(()=>[t(T,{md:12,sm:24,xs:24},{default:s(()=>[t(m,null,{default:s(()=>[($(!0),P(se,null,oe(o.value,i=>($(),P("p",null,[t(E,{type:"primary",onClick:Me=>x(i)},{default:s(()=>[p(u(i.noticeTitle),1)]),_:2},1032,["onClick"])]))),256))]),_:1})]),_:1}),t(A,{width:800,title:y.value,modelValue:f.value,"onUpdate:modelValue":c[1]||(c[1]=i=>f.value=i),responsive:!0,resizable:!0,maxable:!0,"destroy-on-close":!1,position:l.center},{footer:s(()=>[t(M,{onClick:c[0]||(c[0]=i=>f.value=!1)},{default:s(()=>[p("确定")]),_:1})]),default:s(()=>[n("div",null,[t(V,{type:"info"},{default:s(()=>[p(" 发布时间："+u(b.value),1)]),_:1}),t(k,{"border-style":"dashed","content-position":"left"},{default:s(()=>[p("公告详情")]),_:1}),t(Ee,{value:v.value,config:{plugins:[g(Te)(),g(ke)()]},style:{"max-width":"880px","max-height":"500px",margin:"0 auto",padding:"0px"}},null,8,["value","config"])])]),_:1},8,["title","modelValue","position"]),t(T,{md:6,sm:12,xs:24},{default:s(()=>[t(m,{class:"statistics-card"},{default:s(()=>[t(_,{type:"placeholder",class:"statistics-header"},{default:s(()=>[Ne,t(H,{content:"指标说明",placement:"top",offset:6},{default:s(()=>[t(F,{class:"statistics-header-tip"},{default:s(()=>[t(g(le))]),_:1})]),_:1})]),_:1}),t(_,{size:"xxl",class:"statistics-value"},{default:s(()=>[p("¥ "+u(e.value.userMoney),1)]),_:1}),n("div",Re,[n("div",Ve,[n("div",null,"总消费￥"+u(e.value.userConsume),1),t(_,{type:"danger",icon:g(S)},null,8,["icon"])])]),t(k),n("div",null,"子代提成 ￥"+u(e.value.userRebate),1)]),_:1})]),_:1}),t(T,{md:6,sm:12,xs:24},{default:s(()=>[t(m,{class:"statistics-card"},{default:s(()=>[t(_,{type:"placeholder",class:"statistics-header"},{default:s(()=>[je,t(G,{type:"success",size:"small","disable-transitions":!0},{default:s(()=>[p(" 已销售 ")]),_:1})]),_:1}),t(_,{size:"xxl",class:"statistics-value"},{default:s(()=>[p(u(e.value.carmiRatio)+"%",1)]),_:1}),n("div",ze,[t(J,{color:"#13c2c2",percentage:e.value.carmiRatio,"show-text":!1,"stroke-width":8,style:{width:"100%"}},null,8,["percentage"])]),t(k),n("div",Be,[n("div",Pe,[n("div",null,"未售出 "+u(e.value.carmiNotUse)+"张",1),t(_,{type:"success",icon:g(S)},null,8,["icon"])]),n("div",Se,[n("div",null,"已出售 "+u(e.value.carmiUse)+"张",1),t(_,{type:"danger",icon:g(ne)},null,8,["icon"])])])]),_:1})]),_:1})]),_:1}),t(m,{"body-style":{padding:"10px 10px 10px 10px"},"flex-table":N.value},{default:s(()=>[t(O,{ref_key:"tableRef",ref:d,"row-key":"carmiId",columns:h.value,datasource:L,current:R.value,"onUpdate:current":c[2]||(c[2]=i=>R.value=i),selections:C.value,"onUpdate:selections":c[3]||(c[3]=i=>C.value=i),"show-overflow-tooltip":!0,"highlight-current-row":"",stripe:!1,border:!1,toolbar:!1,pagination:{pageSize:20}},{logType:s(({row:i})=>[t(V,{class:"mx-1",type:i.logType_style},{default:s(()=>[p(u(i.logType),1)]),_:2},1032,["type"])]),_:1},8,["columns","current","selections"])]),_:1},8,["flex-table"])]),_:1},8,["flex-table"])}}}),Ye=ee(Le,[["__scopeId","data-v-d87f296d"]]);export{Ye as default};
