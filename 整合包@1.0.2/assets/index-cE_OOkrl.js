var N=Object.defineProperty,O=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var k=(a,t,o)=>t in a?N(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,u=(a,t)=>{for(var o in t||(t={}))z.call(t,o)&&k(a,o,t[o]);if(h)for(var o of h(t))K.call(t,o)&&k(a,o,t[o]);return a},w=(a,t)=>O(a,q(t));import{O as U,P as V,r as i,m as W,v as H,o as L,c as Q,w as c,x as S,b as T,e as p,d,Q as A,R as C,S as F,q as f,z as G,g as J,C as X,D as Y}from"./index-DKVio5DX.js";import{i as Z}from"./index-1zv9CzUI.js";import{i as ee}from"./index-JCBdu9eJ.js";import"./index-hd5M_H5A.js";import{p as te,r as oe}from"./index-64SfhB4e.js";import{i as ne}from"./index-C8m5DZvo.js";const le={name:"ProjectNotice"},pe=Object.assign(le,{setup(a){const{push:t}=U(),{removePageTab:o}=V(),g=i(null);i(""),W({});const E=H(()=>[{type:"selection",columnKey:"selection",width:50,align:"center",fixed:"left"},{slot:"noticeTitle",prop:"noticeTitle",label:"公告标题",minWidth:400},{prop:"createTime",label:"发布时间",minWidth:180},{columnKey:"action",label:"操作",width:130,align:"center",showOverflowTooltip:!1,resizable:!1,slot:"action",fixed:"right"}]),m=i([]),v=i(null),$=i(!0),B=i(!1);i(!0);const b=i(!0),D=({page:l,limit:e,where:n,orders:s,filters:_})=>te(w(u(u(u({},n),s),_),{page:l,limit:e})),P=l=>{var e,n;(n=(e=g.value)==null?void 0:e.reload)==null||n.call(e,{page:1,where:l})},x=l=>{const e=l?"/system/notice/edit":"/system/notice/add";o({key:e}),F(()=>{t({path:e,query:l?{id:l.noticeId}:void 0})})},y=l=>{const e=l==null?m.value:[l];if(!e.length){f.error("请至少选择一条数据");return}G.confirm("确定要删除“"+e.map(n=>n.noticeTitle).join(", ")+"”吗?","系统提示",{type:"warning",draggable:!0}).then(()=>{const n=f.loading("请求中..");oe(e.map(s=>s.noticeId)).then(s=>{n.close(),f.success(s),P()}).catch(s=>{n.close(),f.error(s.message)})}).catch(()=>{})};return(l,e)=>{const n=J,s=X,_=Y,R=ee,j=Z,I=ne;return L(),Q(I,{"hide-footer":"","flex-table":b.value,style:{"min-height":"600px"}},{default:c(()=>[d(j,{"body-style":{padding:"2px 10px 10px 10px"},"flex-table":b.value},{default:c(()=>[d(R,{ref_key:"tableRef",ref:g,"row-key":"noticeId",columns:E.value,datasource:D,current:v.value,"onUpdate:current":e[2]||(e[2]=r=>v.value=r),selections:m.value,"onUpdate:selections":e[3]||(e[3]=r=>m.value=r),"show-overflow-tooltip":!0,"highlight-current-row":"","row-click-checked":"",stripe:B.value,border:$.value,"default-sort":{prop:"createTime",order:"ascending"}},{toolbar:c(()=>[d(n,{type:"primary",icon:T(S),class:"ele-btn-icon",onClick:e[0]||(e[0]=r=>x())},{default:c(()=>[p(" 添加 ")]),_:1},8,["icon"]),d(n,{type:"danger",class:"ele-btn-icon",icon:T(A),onClick:e[1]||(e[1]=r=>y())},{default:c(()=>[p(" 删除 ")]),_:1},8,["icon"])]),action:c(({row:r})=>[d(s,{type:"primary",underline:!1,onClick:C(M=>x(r),["stop"])},{default:c(()=>[p(" 修改 ")]),_:2},1032,["onClick"]),d(_,{direction:"vertical"}),d(s,{type:"danger",underline:!1,onClick:C(M=>y(r),["stop"])},{default:c(()=>[p(" 删除 ")]),_:2},1032,["onClick"])]),_:1},8,["columns","current","selections","stripe","border"])]),_:1},8,["flex-table"])]),_:1},8,["flex-table"])}}});export{pe as default};
